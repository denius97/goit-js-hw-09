{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAGA,MAAMC,EAAOC,SAASC,cAAc,SAEpCF,EAAKG,iBAAiB,UAItB,SAAqBC,GACnBA,EAAIC,iBACJ,IAAIC,EAAaC,OAAOP,EAAKQ,MAAMC,OACnC,MAAMC,EAAOH,OAAOP,EAAKU,KAAKD,OACxBE,EAASJ,OAAOP,EAAKW,OAAOF,OAElC,GAAIE,EAAS,EAEX,YADAb,EAAAc,OAAOC,QAAQ,sBAGjBC,WAAWC,EAAYT,EAAYA,EAAYI,EAAMC,E,IAEvD,IAAIK,EAAkB,EAEtB,SAASD,EAAWT,EAAYI,EAAMC,GACpCK,GAAmB,EA2DrB,SAAuBC,EAAUT,GAC/B,MAAMU,EAAgBC,KAAKC,SAAW,GACtC,OAAO,IAAIC,SAAQ,CAACC,EAASC,KACvBL,EACFI,EAAQ,C,SAAEL,E,MAAUT,IAEpBe,EAAO,C,SAAEN,E,MAAUT,GAAQ,G,CAhE/BgB,CAAcR,EAAiBV,GAAYmB,KAAKC,GAAWC,MAAMC,GACjEtB,GAAcI,EACd,MAAMmB,EAAUf,WAAWC,EAAYL,EAAMJ,EAAYI,EAAMC,GAC3DK,GAAmBL,IACrBmB,aAAaD,GACbb,EAAkB,E,CAuCtB,SAASU,GAAUT,SAAEA,EAAQT,MAAEA,IAC7BuB,QAAQC,IAAI,uBAAqBf,QAAiBT,OAClDV,EAAAc,OAAOqB,QAAQ,uBAAqBhB,QAAiBT,MAAW,CAC5D0B,SAAO,G,CAIb,SAASN,GAASX,SAAEA,EAAQT,MAAEA,IAC5BuB,QAAQC,IAAI,sBAAoBf,QAAiBT,OACjDV,EAAAc,OAAOC,QAAQ,sBAAoBI,QAAeT,MAAW,CAC3D0B,SAAS,G","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\n\nconst form = document.querySelector('.form');\n\nform.addEventListener('submit', runPromises);\n\n// ==============================================\n\nfunction runPromises(evt) {\n  evt.preventDefault();\n  let firstDelay = Number(form.delay.value);\n  const step = Number(form.step.value);\n  const amount = Number(form.amount.value);\n\n  if (amount < 1) {\n    Notify.failure(`Select more then 0`);\n    return;\n  }\n  setTimeout(getPromise, firstDelay, firstDelay, step, amount);\n}\nlet currentPosition = 0;\n\nfunction getPromise(firstDelay, step, amount) {\n  currentPosition += 1;\n  createPromise(currentPosition, firstDelay).then(resolveFn).catch(rejectFn);\n  firstDelay += step;\n  const timeout = setTimeout(getPromise, step, firstDelay, step, amount);\n  if (currentPosition >= amount) {\n    clearTimeout(timeout);\n    currentPosition = 0;\n  }\n}\n\n// ================================================\n\n// function runPromises(evt) {\n//   evt.preventDefault();\n//   let firstDelay = Number(form.delay.value);\n//   const step = Number(form.step.value);\n//   const amount = Number(form.amount.value);\n//   let currentPosition = 0;\n//   if (amount < 1) {\n//     Notify.failure(`Select more then 0`);\n//     return;\n//   }\n//   setTimeout(() => {\n//     currentPosition += 1;\n//     createPromise(currentPosition, firstDelay).then(resolveFn).catch(rejectFn);\n\n//     if (currentPosition >= amount) {\n//       return;\n//     }\n\n//     const interval = setInterval(() => {\n//       currentPosition += 1;\n//       firstDelay += step;\n//       createPromise(currentPosition, firstDelay)\n//         .then(resolveFn)\n//         .catch(rejectFn);\n//       if (currentPosition >= amount) {\n//         clearInterval(interval);\n//       }\n//     }, step);\n//   }, firstDelay);\n// }\n\n// ================================================\n\nfunction resolveFn({ position, delay }) {\n  console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n  Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`, {\n    useIcon: false,\n  });\n}\n\nfunction rejectFn({ position, delay }) {\n  console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n  Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`, {\n    useIcon: false,\n  });\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((resolve, reject) => {\n    if (shouldResolve) {\n      resolve({ position, delay });\n    } else {\n      reject({ position, delay });\n    }\n  });\n}\n"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$form","document","querySelector","addEventListener","evt","preventDefault","firstDelay","Number","delay","value","step","amount","Notify","failure","setTimeout","$47d4ff9957288465$var$getPromise","$47d4ff9957288465$var$currentPosition","position","shouldResolve","Math","random","Promise","resolve","reject","$47d4ff9957288465$var$createPromise","then","$47d4ff9957288465$var$resolveFn","catch","$47d4ff9957288465$var$rejectFn","timeout","clearTimeout","console","log","success","useIcon"],"version":3,"file":"03-promises.cb4ea67b.js.map"}